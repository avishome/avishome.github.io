"use strict";(self.webpackJsonpapp4=self.webpackJsonpapp4||[]).push([[443],{3443:(J,p,o)=>{o.r(p),o.d(p,{CrisisCenterModule:()=>b});var l=o(95),d=o(6814),c=o(1825),e=o(4946);let g=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-crisis-center-home"]],decls:2,vars:0,template:function(n,r){1&n&&(e.TgZ(0,"h3"),e._uU(1,"Welcome to the Crisis Center"),e.qZA())}}),s})();var f=o(4664),h=o(5619),v=o(7398);const C=[{id:1,name:"Dragon Burning Cities"},{id:2,name:"Sky Rains Great White Sharks"},{id:3,name:"Giant Asteroid Heading For Earth"},{id:4,name:"Procrastinators Meeting Delayed Again"}];var M=o(8136);let m=(()=>{var t;class s{constructor(n){this.messageService=n,this.crises$=new h.X(C)}getCrises(){return this.crises$}getCrisis(n){return this.getCrises().pipe((0,v.U)(r=>r.find(a=>a.id===+n)))}addCrisis(n){if(n=n.trim()){const r={id:s.nextCrisisId++,name:n};C.push(r),this.crises$.next(C)}}}return(t=s).nextCrisisId=100,t.\u0275fac=function(n){return new(n||t)(e.LFG(M.e))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();const O=function(t){return[t]};function _(t,s){if(1&t&&(e.TgZ(0,"li")(1,"a",2)(2,"span",3),e._uU(3),e.qZA(),e._uU(4),e.qZA()()),2&t){const i=s.$implicit,n=e.oxw();e.ekj("selected",i.id===n.selectedId),e.xp6(1),e.Q6J("routerLink",e.VKq(5,O,i.id)),e.xp6(2),e.Oqu(i.id),e.xp6(1),e.hij("",i.name," ")}}let x=(()=>{var t;class s{constructor(n,r){this.service=n,this.route=r,this.selectedId=0}ngOnInit(){this.crises$=this.route.firstChild?.paramMap.pipe((0,f.w)(n=>(this.selectedId=parseInt(n.get("id"),10),this.service.getCrises())))}}return(t=s).\u0275fac=function(n){return new(n||t)(e.Y36(m),e.Y36(c.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-crisis-list"]],decls:4,vars:3,consts:[[1,"crises"],[3,"selected",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"badge"]],template:function(n,r){1&n&&(e.TgZ(0,"ul",0),e.YNc(1,_,5,7,"li",1),e.ALo(2,"async"),e.qZA(),e._UZ(3,"router-outlet")),2&n&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,r.crises$)))},dependencies:[d.sg,c.lC,c.rH,d.Ov],styles:[".crises[_ngcontent-%COMP%]{margin:0 0 2em;list-style-type:none;padding:0}.crises[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;cursor:pointer}.crises[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{left:.1em}.crises[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none;display:block;background-color:#eee;margin:.5em 0;border-radius:4px;line-height:2rem}@media (min-width: 600px){.crises[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.2rem;padding:.5em 0;line-height:1.4rem}}.crises[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#2c3a41;background-color:#e6e6e6;left:.1em}.crises[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background:#d6e6f7}.crises[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#bdd7f5}.heroes[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#d6e6f7}.heroes[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#bdd7f5}.crises[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:.5em .6em;color:#fff;background-color:#435b60;min-width:16px;margin-right:.8em;border-radius:4px 0 0 4px}"]}),s})(),P=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-crisis-center"]],decls:3,vars:0,template:function(n,r){1&n&&(e.TgZ(0,"h2"),e._uU(1,"Crisis Center"),e.qZA(),e._UZ(2,"router-outlet"))},dependencies:[c.lC]}),s})();var u=o(2096);let y=(()=>{var t;class s{confirm(n){const r=window.confirm(n||"Is it OK?");return(0,u.of)(r)}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();function Z(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"div")(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.TgZ(5,"label",1),e._uU(6,"Crisis name: "),e.qZA(),e.TgZ(7,"input",2),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.editName=r)}),e.qZA(),e.TgZ(8,"div")(9,"button",3),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.save())}),e._uU(10,"Save"),e.qZA(),e.TgZ(11,"button",3),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.cancel())}),e._uU(12,"Cancel"),e.qZA()()()}if(2&t){const i=e.oxw();e.xp6(2),e.Oqu(i.editName),e.xp6(2),e.hij("Id: ",i.crisis.id,""),e.xp6(3),e.Q6J("ngModel",i.editName)}}let D=(()=>{var t;class s{constructor(n,r,a){this.route=n,this.router=r,this.dialogService=a,this.editName=""}ngOnInit(){this.route.data.subscribe(n=>{const r=n.crisis;this.editName=r.name,this.crisis=r})}cancel(){this.gotoCrises()}save(){this.crisis.name=this.editName,this.gotoCrises()}canDeactivate(){return!this.crisis||this.crisis.name===this.editName||this.dialogService.confirm("Discard changes?")}gotoCrises(){this.router.navigate(["../",{id:this.crisis?this.crisis.id:null,foo:"foo"}],{relativeTo:this.route})}}return(t=s).\u0275fac=function(n){return new(n||t)(e.Y36(c.gz),e.Y36(c.F0),e.Y36(y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-crisis-detail"]],decls:1,vars:1,consts:[[4,"ngIf"],["for","crisis-name"],["type","text","id","crisis-name","placeholder","name",3,"ngModel","ngModelChange"],["type","button",3,"click"]],template:function(n,r){1&n&&e.YNc(0,Z,13,3,"div",0),2&n&&e.Q6J("ngIf",r.crisis)},dependencies:[d.O5,l.Fj,l.JJ,l.On],styles:["h2[_ngcontent-%COMP%]{font-size:1.5rem}input[_ngcontent-%COMP%]{font-size:1rem;margin-top:1rem}"]}),s})();var F=o(6232),A=o(1631);const I=[{path:"",component:P,children:[{path:"",component:x,children:[{path:":id",component:D,canDeactivate:[t=>!t.canDeactivate||t.canDeactivate()],resolve:{crisis:t=>{const s=(0,e.f3M)(c.F0),i=(0,e.f3M)(m),n=t.paramMap.get("id");return i.getCrisis(n).pipe((0,A.z)(r=>r?(0,u.of)(r):(s.navigate(["/crisis-center"]),F.E)))}}},{path:"",component:g}]}]}];let S=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.Bz.forChild(I),c.Bz]}),s})(),b=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.ez,l.u5,S]}),s})()}}]);